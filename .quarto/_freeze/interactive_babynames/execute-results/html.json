{
  "hash": "7ea1318bff9e68fbc69258104c9c965c",
  "result": {
    "markdown": "---\ntitle: \"Top babynames\"\nformat: html\nserver: shiny\n---\n\n\n[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.8091208.svg)](https://doi.org/10.5281/zenodo.8091208)\n\n\nIn this project we aim to visualize the trends of the most frequently used babynames from 1880 to 2017 in the United States. We do this by:\n\n- Understanding the different columns of the data set\n- Find the top 10 most frequently used baby names in the data for:\n  - girls\n  - boys\n- Plot the yearly trend of the top 10 baby names \n\n![](https://cdn.pixabay.com/photo/2016/10/02/06/27/baby-1709013_1280.jpg){fig-align=\"right\" width=400}\n\nThe first ten lines of the babynames dataset looks like:\n\n\n::: {.cell}\n::: {.cell-output-display}\n| year|sex |name      |    n|      prop|\n|----:|:---|:---------|----:|---------:|\n| 1880|F   |Mary      | 7065| 0.0723836|\n| 1880|F   |Anna      | 2604| 0.0266790|\n| 1880|F   |Emma      | 2003| 0.0205215|\n| 1880|F   |Elizabeth | 1939| 0.0198658|\n| 1880|F   |Minnie    | 1746| 0.0178884|\n| 1880|F   |Margaret  | 1578| 0.0161672|\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"sex\" class=\"form-group shiny-input-radiogroup shiny-input-container\" role=\"radiogroup\" aria-labelledby=\"sex-label\">\n<label class=\"control-label\" id=\"sex-label\" for=\"sex\">sex:</label>\n<div class=\"shiny-options-group\">\n<div class=\"radio\">\n<label>\n<input type=\"radio\" name=\"sex\" value=\"M\" checked=\"checked\"/>\n<span>M</span>\n</label>\n</div>\n<div class=\"radio\">\n<label>\n<input type=\"radio\" name=\"sex\" value=\"F\"/>\n<span>F</span>\n</label>\n</div>\n</div>\n</div>\n```\n:::\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"form-group shiny-input-container\">\n<label class=\"control-label\" id=\"n_names-label\" for=\"n_names\">Number of names:</label>\n<input class=\"js-range-slider\" id=\"n_names\" data-skin=\"shiny\" data-min=\"1\" data-max=\"12\" data-from=\"10\" data-step=\"1\" data-grid=\"true\" data-grid-num=\"5.5\" data-grid-snap=\"false\" data-prettify-separator=\",\" data-prettify-enabled=\"true\" data-keyboard=\"true\" data-data-type=\"number\"/>\n</div>\n```\n:::\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"babyplot\" class=\"shiny-plot-output\" style=\"width:100%;height:400px;\"></div>\n```\n:::\n:::\n\n::: {.cell context='server'}\n\n:::\npreserve92bdc00beb84a077\npreserve3413792931270846\n\n<!--html_preserve-->\n<script type=\"application/shiny-prerendered\" data-context=\"dependencies\">\n{\"type\":\"list\",\"attributes\":{},\"value\":[{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"version\",\"src\",\"meta\",\"script\",\"stylesheet\",\"head\",\"attachment\",\"package\",\"all_files\",\"pkgVersion\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"html_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"ionrangeslider-javascript\"]},{\"type\":\"character\",\"attributes\":{},\"value\":[\"2.3.1\"]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"file\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"www/shared/ionrangeslider\"]}]},{\"type\":\"NULL\"},{\"type\":\"character\",\"attributes\":{},\"value\":[\"js/ion.rangeSlider.min.js\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"},{\"type\":\"NULL\"},{\"type\":\"character\",\"attributes\":{},\"value\":[\"shiny\"]},{\"type\":\"logical\",\"attributes\":{},\"value\":[true]},{\"type\":\"character\",\"attributes\":{},\"value\":[\"1.7.2\"]}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"version\",\"src\",\"meta\",\"script\",\"stylesheet\",\"head\",\"attachment\",\"package\",\"all_files\",\"pkgVersion\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"html_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"strftime\"]},{\"type\":\"character\",\"attributes\":{},\"value\":[\"0.9.2\"]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"file\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"www/shared/strftime\"]}]},{\"type\":\"NULL\"},{\"type\":\"character\",\"attributes\":{},\"value\":[\"strftime-min.js\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"},{\"type\":\"NULL\"},{\"type\":\"character\",\"attributes\":{},\"value\":[\"shiny\"]},{\"type\":\"logical\",\"attributes\":{},\"value\":[true]},{\"type\":\"character\",\"attributes\":{},\"value\":[\"1.7.2\"]}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"version\",\"src\",\"meta\",\"script\",\"stylesheet\",\"head\",\"attachment\",\"package\",\"all_files\",\"pkgVersion\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"html_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"ionrangeslider-css\"]},{\"type\":\"character\",\"attributes\":{},\"value\":[\"2.3.1\"]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"file\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"www/shared/ionrangeslider\"]}]},{\"type\":\"NULL\"},{\"type\":\"NULL\"},{\"type\":\"character\",\"attributes\":{},\"value\":[\"css/ion.rangeSlider.css\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"},{\"type\":\"character\",\"attributes\":{},\"value\":[\"shiny\"]},{\"type\":\"logical\",\"attributes\":{},\"value\":[true]},{\"type\":\"character\",\"attributes\":{},\"value\":[\"1.7.2\"]}]}]}\n</script>\n<!--/html_preserve-->\n<!--html_preserve-->\n<script type=\"application/shiny-prerendered\" data-context=\"execution_dependencies\">\n{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"packages\"]}},\"value\":[{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"packages\",\"version\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"data.frame\"]},\"row.names\":{\"type\":\"integer\",\"attributes\":{},\"value\":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"babynames\",\"base\",\"bslib\",\"cachem\",\"cli\",\"compiler\",\"datasets\",\"digest\",\"ellipsis\",\"evaluate\",\"fansi\",\"fastmap\",\"glue\",\"graphics\",\"grDevices\",\"highr\",\"htmltools\",\"htmlwidgets\",\"httpuv\",\"jquerylib\",\"jsonlite\",\"knitr\",\"later\",\"lifecycle\",\"magrittr\",\"memoise\",\"methods\",\"mime\",\"pillar\",\"pkgconfig\",\"promises\",\"R6\",\"Rcpp\",\"rlang\",\"rmarkdown\",\"rstudioapi\",\"sass\",\"shiny\",\"stats\",\"stringi\",\"stringr\",\"tibble\",\"tools\",\"utf8\",\"utils\",\"vctrs\",\"xfun\",\"xtable\",\"yaml\"]},{\"type\":\"character\",\"attributes\":{},\"value\":[\"1.0.1\",\"4.2.0\",\"0.4.0\",\"1.0.6\",\"3.4.1\",\"4.2.0\",\"4.2.0\",\"0.6.29\",\"0.3.2\",\"0.16\",\"1.0.3\",\"1.1.0\",\"1.6.2\",\"4.2.0\",\"4.2.0\",\"0.9\",\"0.5.3\",\"1.5.4\",\"1.6.6\",\"0.1.4\",\"1.8.0\",\"1.41\",\"1.3.0\",\"1.0.3\",\"2.0.3\",\"2.0.1\",\"4.2.0\",\"0.12\",\"1.8.1\",\"2.0.3\",\"1.2.0.1\",\"2.5.1\",\"1.0.9\",\"1.0.6\",\"2.16\",\"0.14\",\"0.4.2\",\"1.7.2\",\"4.2.0\",\"1.7.8\",\"1.4.1\",\"3.1.8\",\"4.2.0\",\"1.2.2\",\"4.2.0\",\"0.5.1\",\"0.36\",\"1.8-4\",\"2.3.5\"]}]}]}\n</script>\n<!--/html_preserve-->",
    "supporting": [
      "interactive_babynames_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {
      "preserve3413792931270846": "\n<script type=\"application/shiny-prerendered\" data-context=\"server-extras\">\nojs_define <- function(..., .session = shiny::getDefaultReactiveDomain()) {\n  quos <- rlang::enquos(...)\n  vars <- rlang::list2(...)\n  nm <- names(vars)\n  if (is.null(nm)) {\n    nm <- rep_len(\"\", length(vars))\n  }\n  mapply(function(q, nm, val) {\n    # Infer name, if possible\n    if (nm == \"\") {\n      tryCatch({\n        nm <- rlang::as_name(q)\n      }, error = function(e) {\n        code <- paste(collapse = \"\\n\", deparse(rlang::f_rhs(q)))\n        stop(\"ojs_define() could not create a name for the argument: \", code)\n      })\n    }\n    .session$output[[nm]] <- val\n    outputOptions(.session$output, nm, suspendWhenHidden = FALSE)\n    .session$sendCustomMessage(\"ojs-export\", list(name = nm))\n    NULL\n  }, quos, nm, vars, SIMPLIFY = FALSE, USE.NAMES = FALSE)\n  invisible()\n}\n</script>\n",
      "preserve92bdc00beb84a077": "\n<script type=\"application/shiny-prerendered\" data-context=\"server\">\nlibrary(dplyr)\nlibrary(babynames)\nlibrary(ggplot2)\n\nget_most_frequent <- function(babynames, select_sex, from = 1950) {\n  most_freq <- babynames |>\n    filter(sex == select_sex, year > from) |>\n    group_by(name) |>\n    summarise(average = mean(prop)) |>\n    arrange(desc(average))\n  return(most_freq)\n}\n\nplot_top <- function(x, babynames, select_sex, top = 10, from = 1950) {\n  topx <- x$name[1:top]\n  \n  p <- babynames |>\n    filter(name %in% topx, sex == select_sex, year > from) |>\n    ggplot(aes(x = year, y = prop, color = name)) +\n    geom_line() +\n    scale_color_brewer(palette = \"Paired\") +\n    theme_classic()\n  \n  return(p)\n}\n\noutput$babyplot <- renderPlot({\nget_most_frequent(babynames, select_sex = input$sex) |>\n  plot_top(babynames, select_sex = input$sex, top = input$n_names)\n})\n</script>\n"
    },
    "postProcess": true
  }
}